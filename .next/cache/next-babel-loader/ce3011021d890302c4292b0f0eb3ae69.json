{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Tabs from \"antd/lib/tabs\";\nimport _Icon from \"antd/lib/icon\";\nimport _Button from \"antd/lib/button\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Router, { withRouter } from 'next/router';\nimport LRU from 'lru-cache';\nimport api from '../lib/api';\nimport Repo from '../components/Repo';\nconst cache = new LRU({\n  maxAge: 1000 * 60 * 5 //有效期5分钟\n\n});\nconst isServer = true; // let cacheUserRepos,cacheUserStaredRepos\n\nfunction Index({\n  userRepos,\n  user,\n  router,\n  userStaredRepos\n}) {\n  // userRepos, userStaredRepos依赖的作用是,数据过期后,将重新请求的数据进行缓存\n  useEffect(() => {\n    if (!isServer) {\n      if (userRepos.length > 0) {\n        cache.set('userRepos', userRepos);\n        cache.get('userRepos', userRepos);\n        console.log('y', cache.get('userRepos', userRepos));\n      }\n\n      if (userStaredRepos.length > 0) {\n        cache.set('userStaredRepos', userStaredRepos);\n      } //手动缓存\n      // cacheUserRepos=userRepos\n      // cacheUserStaredRepos=userStaredRepos\n      // setTimeout(()=>{\n      //     cacheUserRepos=null\n      //     cacheUserStaredRepos=null\n      // },1000*60*5)\n\n    }\n  }, [userRepos, userStaredRepos]);\n  const tabKey = router.query.key || '1';\n\n  const handleTabChange = activeKey => {\n    Router.push(`/?key=${activeKey}`);\n  };\n\n  if (!user || !user.id) {\n    return __jsx(\"div\", {\n      className: \"jsx-550798303\" + \" \" + 'root'\n    }, __jsx(\"p\", {\n      className: \"jsx-550798303\"\n    }, \"\\u4EB2\\uFF0C\\u60A8\\u8FD8\\u6CA1\\u6709\\u767B\\u5F55\\u54E6~\"), __jsx(_Button, {\n      type: \"primary\",\n      href: `/prepare-auth?url=${router.asPath}`\n    }, \"\\u53BB\\u767B\\u5F55\"), __jsx(_JSXStyle, {\n      id: \"550798303\"\n    }, \".root.jsx-550798303{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFyaW1vXFxEZXNrdG9wXFxuZXh0LWdpdGh1YlxccGFnZXNcXGluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWdEUyxBQUc0QixrQkFDVixRQUNDLFNBQ3NCLHlHQUNsQiwwRUFDVSw4RUFDQyxtR0FDSiw2RkFDckIiLCJmaWxlIjoiQzpcXFVzZXJzXFxtYXJpbW9cXERlc2t0b3BcXG5leHQtZ2l0aHViXFxwYWdlc1xcaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZUVmZmVjdH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7QnV0dG9uLEljb24sVGFic30gZnJvbSBcImFudGRcIlxyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xyXG5pbXBvcnQgUm91dGVyLHt3aXRoUm91dGVyfSBmcm9tICduZXh0L3JvdXRlcidcclxuaW1wb3J0IExSVSBmcm9tICdscnUtY2FjaGUnXHJcbmltcG9ydCBhcGkgZnJvbSAnLi4vbGliL2FwaSdcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJ1xyXG5cclxuY29uc3QgY2FjaGU9bmV3IExSVSh7XHJcbiAgbWF4QWdlOjEwMDAqNjAqNSAvL+acieaViOacnzXliIbpkp9cclxufSlcclxuXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCdcclxuLy8gbGV0IGNhY2hlVXNlclJlcG9zLGNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbmZ1bmN0aW9uIEluZGV4KHt1c2VyUmVwb3MsdXNlcixyb3V0ZXIsdXNlclN0YXJlZFJlcG9zfSl7XHJcblxyXG4gIC8vIHVzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9z5L6d6LWW55qE5L2c55So5pivLOaVsOaNrui/h+acn+WQjizlsIbph43mlrDor7fmsYLnmoTmlbDmja7ov5vooYznvJPlrZhcclxudXNlRWZmZWN0KCgpPT57XHJcbiAgXHJcbiAgaWYoIWlzU2VydmVyKXtcclxuICAgIGlmKHVzZXJSZXBvcy5sZW5ndGg+MCl7XHJcbiAgICAgIGNhY2hlLnNldCgndXNlclJlcG9zJyx1c2VyUmVwb3MpXHJcbiAgICAgIGNhY2hlLmdldCgndXNlclJlcG9zJyx1c2VyUmVwb3MpXHJcbiAgICAgIGNvbnNvbGUubG9nKCd5JyxjYWNoZS5nZXQoJ3VzZXJSZXBvcycsdXNlclJlcG9zKSlcclxuICAgIH1cclxuICAgIGlmKHVzZXJTdGFyZWRSZXBvcy5sZW5ndGg+MCl7XHJcbiAgICAgIGNhY2hlLnNldCgndXNlclN0YXJlZFJlcG9zJyx1c2VyU3RhcmVkUmVwb3MpXHJcbiAgICB9XHJcbiAgICAvL+aJi+WKqOe8k+WtmFxyXG4gICAgLy8gY2FjaGVVc2VyUmVwb3M9dXNlclJlcG9zXHJcbiAgICAvLyBjYWNoZVVzZXJTdGFyZWRSZXBvcz11c2VyU3RhcmVkUmVwb3NcclxuICAgIC8vIHNldFRpbWVvdXQoKCk9PntcclxuICAgIC8vICAgICBjYWNoZVVzZXJSZXBvcz1udWxsXHJcbiAgICAvLyAgICAgY2FjaGVVc2VyU3RhcmVkUmVwb3M9bnVsbFxyXG4gICAgLy8gfSwxMDAwKjYwKjUpXHJcblxyXG4gIH1cclxufSxbdXNlclJlcG9zLHVzZXJTdGFyZWRSZXBvc10pXHJcblxyXG4gIGNvbnN0IHRhYktleSA9IHJvdXRlci5xdWVyeS5rZXkgfHwgJzEnXHJcbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gYWN0aXZlS2V5ID0+IHtcclxuICAgIFJvdXRlci5wdXNoKGAvP2tleT0ke2FjdGl2ZUtleX1gKVxyXG4gIH1cclxuICAgIGlmKCF1c2VyfHwhdXNlci5pZCl7XHJcbiAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0ncm9vdCc+XHJcbiAgICAgICAgPHA+5Lqy77yM5oKo6L+Y5rKh5pyJ55m75b2V5ZOmfjwvcD5cclxuICAgICAgICA8QnV0dG9uIHR5cGU9J3ByaW1hcnknIGhyZWY9e2AvcHJlcGFyZS1hdXRoP3VybD0ke3JvdXRlci5hc1BhdGh9YH0+5Y6755m75b2VPC9CdXR0b24+XHJcbiAgICAgICAgPHN0eWxlIGpzeD5cclxuICAgICAgICB7YFxyXG4gICAgICAgIC5yb290e1xyXG4gICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICB0b3A6NTAlO1xyXG4gICAgICAgICAgbGVmdDo1MCU7XHJcbiAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7XHJcbiAgICAgICAgICBkaXNwbGF5OmZsZXg7XHJcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgfVxyXG4gICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0ncm9vdCc+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndXNlci1pbmZvJz5cclxuICAgICAgICAgICAgPGltZyBzcmM9e3VzZXIuYXZhdGFyX3VybH0gYWx0PVwiYXZhdGFyX3VybFwiIGNsYXNzTmFtZT1cImF2YXRhclwiIC8+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImxvZ2luXCI+e3VzZXIubG9naW59PC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1lXCI+e3VzZXIubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJpb1wiPnt1c2VyLmJpb308L3NwYW4+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVtYWlsXCI+XHJcbiAgICAgICAgICAgICAgPEljb24gdHlwZT1cIm1haWxcIiBzdHlsZT17eyBtYXJnaW5SaWdodDogNSB9fSAvPlxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86JHt1c2VyLmVtYWlsfWB9PlxyXG4gICAgICAgICAgICAgICAge3VzZXIuZW1haWwgPyB1c2VyLmVtYWlsIDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9JRnJlZU92Tyd9XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1yZXBvc1wiPlxyXG4gICAgICAgICAgICA8VGFicyBhY3RpdmVLZXk9e3RhYktleX0gb25DaGFuZ2U9e2hhbmRsZVRhYkNoYW5nZX0gYW5pbWF0ZWQ9e2ZhbHNlfT5cclxuICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lIHRhYj1cIuS9oOeahOS7k+W6k1wiIGtleT1cIjFcIj5cclxuICAgICAgICAgICAgICAgIHt1c2VyUmVwb3MubGVuZ3RoPjBcclxuICAgICAgICAgICAgICAgID91c2VyUmVwb3MubWFwKHJlcG8gPT4gKFxyXG4gICAgICAgICAgICAgICAgICA8UmVwbyByZXBvPXtyZXBvfSBrZXk9e3JlcG8uaWR9IC8+XHJcbiAgICAgICAgICAgICAgICApKVxyXG4gICAgICAgICAgICAgICAgOifmmoLml7bmnKrmn6Xor6LliLDku5PlupMnXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxyXG4gICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmUgdGFiPVwi5L2g5YWz5rOo55qE5LuT5bqTXCIga2V5PVwiMlwiPlxyXG4gICAgICAgICAgICAgICAge3VzZXJTdGFyZWRSZXBvcy5sZW5ndGg+MFxyXG4gICAgICAgICAgICAgICAgP3VzZXJTdGFyZWRSZXBvcy5tYXAocmVwbyA9PiAoXHJcbiAgICAgICAgICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG99IGtleT17cmVwby5pZH0gLz5cclxuICAgICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgICAgICA6J+aaguaXoOWFs+azqOeahOS7k+W6kydcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLnVzZXItaW5mbyB7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IDIwMHB4O1xyXG4gICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNDBweDtcclxuICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcclxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmxvZ2luIHtcclxuICAgICAgICAgICAgICBmb250LXdlaWdodDogODAwO1xyXG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5uYW1lIHtcclxuICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgICAgICAgY29sb3I6ICM3Nzc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmJpbyB7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICAgICAgICBjb2xvcjogIzMzMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuYXZhdGFyIHtcclxuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLnVzZXItcmVwb3N7XHJcbiAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgfVxyXG59XHJcblxyXG5JbmRleC5nZXRJbml0aWFsUHJvcHM9YXN5bmMgKHtjdHgscmVkdXhTdG9yZSxyZXF9KT0+e1xyXG4gIGNvbnN0IHVzZXIgPXJlZHV4U3RvcmUuZ2V0U3RhdGUoKS51c2VyXHJcbiAgbGV0IHVzZXJSZXBvcz1bXSx1c2VyU3RhcmVkUmVwb3M9W10sdXNlclJlcG9zUmVzcD17fSx1c2VyU3RhcnJlZFJlcG9zUmVzcD17fVxyXG4gIGlmKCF1c2VyfHwhdXNlci5pZCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc0xvZ2luOmZhbHNlLFxyXG4gICAgICB1c2VyUmVwb3MsXHJcbiAgICAgIHVzZXJTdGFyZWRSZXBvcyxcclxuICAgIH1cclxuICB9ZWxzZXtcclxuICAgIGlmKCFpc1NlcnZlcil7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJykpXHJcbiAgICAgIGlmKGNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJykmJmNhY2hlLmdldCgndXNlclJlcG9zJykpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpc0xvZ2luOnRydWUsXHJcbiAgICAgICAgICB1c2VyUmVwb3M6Y2FjaGVVc2VyUmVwb3MsXHJcbiAgICAgICAgICB1c2VyU3RhcmVkUmVwb3M6Y2FjaGVVc2VyU3RhcmVkUmVwb3NcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/miYvliqjnvJPlrZhcclxuICAgICAgLy8gaWYoY2FjaGVVc2VyU3RhcmVkUmVwb3MmJmNhY2hlVXNlclJlcG9zKXtcclxuICAgICAgLy8gICByZXR1cm4ge1xyXG4gICAgICAvLyAgICAgaXNMb2dpbjp0cnVlLFxyXG4gICAgICAvLyAgICAgdXNlclJlcG9zOmNhY2hlVXNlclJlcG9zLFxyXG4gICAgICAvLyAgICAgdXNlclN0YXJlZFJlcG9zOmNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICB1c2VyUmVwb3NSZXNwPWF3YWl0IGFwaS5yZXF1ZXN0KHt1cmw6Jy91c2VyL3JlcG9zJ30sY3R4LnJlcSxjdHgucmVzKVxyXG4gICAgICB1c2VyU3RhcnJlZFJlcG9zUmVzcD0gYXdhaXQgYXBpLnJlcXVlc3Qoe3VybDonL3VzZXIvc3RhcnJlZCd9LGN0eC5yZXEsY3R4LnJlcylcclxuICAgICAgaWYoaXNTZXJ2ZXIpe1xyXG4gICAgICAgIHVzZXJSZXBvcz11c2VyUmVwb3NSZXNwLmRhdGF8fFtdXHJcbiAgICAgICAgdXNlclN0YXJlZFJlcG9zPXVzZXJTdGFycmVkUmVwb3NSZXNwLmRhdGF8fFtdXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIGlmKHVzZXJSZXBvc1Jlc3AuZGF0YSYmdXNlclJlcG9zUmVzcC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgdXNlclJlcG9zPXVzZXJSZXBvc1Jlc3AuZGF0YS5kYXRhfHxbXVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih1c2VyU3RhcmVkUmVwb3MuZGF0YSYmdXNlclN0YXJlZFJlcG9zLmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICB1c2VyU3RhcmVkUmVwb3M9dXNlclN0YXJyZWRSZXBvc1Jlc3AuZGF0YS5kYXRhfHxbXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coJ3dpbmRvdyBlcnJvcicsZXJyb3IpXHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc0xvZ2luOnRydWUsXHJcbiAgICAgIHVzZXJSZXBvcyxcclxuICAgICAgdXNlclN0YXJlZFJlcG9zLFxyXG4gICAgfVxyXG4gIH1cclxuICAgIFxyXG59XHJcbmNvbnN0IG1hcFN0YXRlVG9wcm9wcz0oc3RhdGUpPT57XHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLnN0YXRlXHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoY29ubmVjdChtYXBTdGF0ZVRvcHJvcHMpKEluZGV4KSkgIl19 */\\n/*@ sourceURL=C:\\\\Users\\\\marimo\\\\Desktop\\\\next-github\\\\pages\\\\index.js */\"));\n  } else {\n    return __jsx(\"div\", {\n      className: \"jsx-2976399386\" + \" \" + 'root'\n    }, __jsx(\"div\", {\n      className: \"jsx-2976399386\" + \" \" + 'user-info'\n    }, __jsx(\"img\", {\n      src: user.avatar_url,\n      alt: \"avatar_url\",\n      className: \"jsx-2976399386\" + \" \" + \"avatar\"\n    }), __jsx(\"span\", {\n      className: \"jsx-2976399386\" + \" \" + \"login\"\n    }, user.login), __jsx(\"span\", {\n      className: \"jsx-2976399386\" + \" \" + \"name\"\n    }, user.name), __jsx(\"span\", {\n      className: \"jsx-2976399386\" + \" \" + \"bio\"\n    }, user.bio), __jsx(\"p\", {\n      className: \"jsx-2976399386\" + \" \" + \"email\"\n    }, __jsx(_Icon, {\n      type: \"mail\",\n      style: {\n        marginRight: 5\n      }\n    }), __jsx(\"a\", {\n      href: `mailto:${user.email}`,\n      className: \"jsx-2976399386\"\n    }, user.email ? user.email : 'https://github.com/IFreeOvO'))), __jsx(\"div\", {\n      className: \"jsx-2976399386\" + \" \" + \"user-repos\"\n    }, __jsx(_Tabs, {\n      activeKey: tabKey,\n      onChange: handleTabChange,\n      animated: false\n    }, __jsx(_Tabs.TabPane, {\n      tab: \"\\u4F60\\u7684\\u4ED3\\u5E93\",\n      key: \"1\"\n    }, userRepos.length > 0 ? userRepos.map(repo => __jsx(Repo, {\n      repo: repo,\n      key: repo.id\n    })) : '暂时未查询到仓库'), __jsx(_Tabs.TabPane, {\n      tab: \"\\u4F60\\u5173\\u6CE8\\u7684\\u4ED3\\u5E93\",\n      key: \"2\"\n    }, userStaredRepos.length > 0 ? userStaredRepos.map(repo => __jsx(Repo, {\n      repo: repo,\n      key: repo.id\n    })) : '暂无关注的仓库'))), __jsx(_JSXStyle, {\n      id: \"2976399386\"\n    }, \".root.jsx-2976399386{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:20px 0;}.user-info.jsx-2976399386{width:200px;margin-right:40px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.login.jsx-2976399386{font-weight:800;font-size:20px;margin-top:20px;}.name.jsx-2976399386{font-size:16px;color:#777;}.bio.jsx-2976399386{margin-top:20px;color:#333;}.avatar.jsx-2976399386{width:100%;border-radius:5px;}.user-repos.jsx-2976399386{position:relative;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFyaW1vXFxEZXNrdG9wXFxuZXh0LWdpdGh1YlxccGFnZXNcXGluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlHc0IsQUFHNEIsQUFJRCxBQU9JLEFBS0QsQUFJQyxBQUlMLEFBSU0sV0FIQyxDQXBCQSxHQVlQLENBTEksQUFTSixFQVFiLFFBWEEsQ0FJQSxFQUlBLENBcEJnQixDQU9FLGdCQUNsQiwyQkFiaUIsWUFNRixHQUxmLHVFQU13Qiw4RUFDeEIiLCJmaWxlIjoiQzpcXFVzZXJzXFxtYXJpbW9cXERlc2t0b3BcXG5leHQtZ2l0aHViXFxwYWdlc1xcaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZUVmZmVjdH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7QnV0dG9uLEljb24sVGFic30gZnJvbSBcImFudGRcIlxyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xyXG5pbXBvcnQgUm91dGVyLHt3aXRoUm91dGVyfSBmcm9tICduZXh0L3JvdXRlcidcclxuaW1wb3J0IExSVSBmcm9tICdscnUtY2FjaGUnXHJcbmltcG9ydCBhcGkgZnJvbSAnLi4vbGliL2FwaSdcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJ1xyXG5cclxuY29uc3QgY2FjaGU9bmV3IExSVSh7XHJcbiAgbWF4QWdlOjEwMDAqNjAqNSAvL+acieaViOacnzXliIbpkp9cclxufSlcclxuXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCdcclxuLy8gbGV0IGNhY2hlVXNlclJlcG9zLGNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbmZ1bmN0aW9uIEluZGV4KHt1c2VyUmVwb3MsdXNlcixyb3V0ZXIsdXNlclN0YXJlZFJlcG9zfSl7XHJcblxyXG4gIC8vIHVzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9z5L6d6LWW55qE5L2c55So5pivLOaVsOaNrui/h+acn+WQjizlsIbph43mlrDor7fmsYLnmoTmlbDmja7ov5vooYznvJPlrZhcclxudXNlRWZmZWN0KCgpPT57XHJcbiAgXHJcbiAgaWYoIWlzU2VydmVyKXtcclxuICAgIGlmKHVzZXJSZXBvcy5sZW5ndGg+MCl7XHJcbiAgICAgIGNhY2hlLnNldCgndXNlclJlcG9zJyx1c2VyUmVwb3MpXHJcbiAgICAgIGNhY2hlLmdldCgndXNlclJlcG9zJyx1c2VyUmVwb3MpXHJcbiAgICAgIGNvbnNvbGUubG9nKCd5JyxjYWNoZS5nZXQoJ3VzZXJSZXBvcycsdXNlclJlcG9zKSlcclxuICAgIH1cclxuICAgIGlmKHVzZXJTdGFyZWRSZXBvcy5sZW5ndGg+MCl7XHJcbiAgICAgIGNhY2hlLnNldCgndXNlclN0YXJlZFJlcG9zJyx1c2VyU3RhcmVkUmVwb3MpXHJcbiAgICB9XHJcbiAgICAvL+aJi+WKqOe8k+WtmFxyXG4gICAgLy8gY2FjaGVVc2VyUmVwb3M9dXNlclJlcG9zXHJcbiAgICAvLyBjYWNoZVVzZXJTdGFyZWRSZXBvcz11c2VyU3RhcmVkUmVwb3NcclxuICAgIC8vIHNldFRpbWVvdXQoKCk9PntcclxuICAgIC8vICAgICBjYWNoZVVzZXJSZXBvcz1udWxsXHJcbiAgICAvLyAgICAgY2FjaGVVc2VyU3RhcmVkUmVwb3M9bnVsbFxyXG4gICAgLy8gfSwxMDAwKjYwKjUpXHJcblxyXG4gIH1cclxufSxbdXNlclJlcG9zLHVzZXJTdGFyZWRSZXBvc10pXHJcblxyXG4gIGNvbnN0IHRhYktleSA9IHJvdXRlci5xdWVyeS5rZXkgfHwgJzEnXHJcbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gYWN0aXZlS2V5ID0+IHtcclxuICAgIFJvdXRlci5wdXNoKGAvP2tleT0ke2FjdGl2ZUtleX1gKVxyXG4gIH1cclxuICAgIGlmKCF1c2VyfHwhdXNlci5pZCl7XHJcbiAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0ncm9vdCc+XHJcbiAgICAgICAgPHA+5Lqy77yM5oKo6L+Y5rKh5pyJ55m75b2V5ZOmfjwvcD5cclxuICAgICAgICA8QnV0dG9uIHR5cGU9J3ByaW1hcnknIGhyZWY9e2AvcHJlcGFyZS1hdXRoP3VybD0ke3JvdXRlci5hc1BhdGh9YH0+5Y6755m75b2VPC9CdXR0b24+XHJcbiAgICAgICAgPHN0eWxlIGpzeD5cclxuICAgICAgICB7YFxyXG4gICAgICAgIC5yb290e1xyXG4gICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICAgICAgICB0b3A6NTAlO1xyXG4gICAgICAgICAgbGVmdDo1MCU7XHJcbiAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7XHJcbiAgICAgICAgICBkaXNwbGF5OmZsZXg7XHJcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgfVxyXG4gICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0ncm9vdCc+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndXNlci1pbmZvJz5cclxuICAgICAgICAgICAgPGltZyBzcmM9e3VzZXIuYXZhdGFyX3VybH0gYWx0PVwiYXZhdGFyX3VybFwiIGNsYXNzTmFtZT1cImF2YXRhclwiIC8+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImxvZ2luXCI+e3VzZXIubG9naW59PC9zcGFuPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1lXCI+e3VzZXIubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJpb1wiPnt1c2VyLmJpb308L3NwYW4+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVtYWlsXCI+XHJcbiAgICAgICAgICAgICAgPEljb24gdHlwZT1cIm1haWxcIiBzdHlsZT17eyBtYXJnaW5SaWdodDogNSB9fSAvPlxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86JHt1c2VyLmVtYWlsfWB9PlxyXG4gICAgICAgICAgICAgICAge3VzZXIuZW1haWwgPyB1c2VyLmVtYWlsIDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9JRnJlZU92Tyd9XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1yZXBvc1wiPlxyXG4gICAgICAgICAgICA8VGFicyBhY3RpdmVLZXk9e3RhYktleX0gb25DaGFuZ2U9e2hhbmRsZVRhYkNoYW5nZX0gYW5pbWF0ZWQ9e2ZhbHNlfT5cclxuICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lIHRhYj1cIuS9oOeahOS7k+W6k1wiIGtleT1cIjFcIj5cclxuICAgICAgICAgICAgICAgIHt1c2VyUmVwb3MubGVuZ3RoPjBcclxuICAgICAgICAgICAgICAgID91c2VyUmVwb3MubWFwKHJlcG8gPT4gKFxyXG4gICAgICAgICAgICAgICAgICA8UmVwbyByZXBvPXtyZXBvfSBrZXk9e3JlcG8uaWR9IC8+XHJcbiAgICAgICAgICAgICAgICApKVxyXG4gICAgICAgICAgICAgICAgOifmmoLml7bmnKrmn6Xor6LliLDku5PlupMnXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDwvVGFicy5UYWJQYW5lPlxyXG4gICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmUgdGFiPVwi5L2g5YWz5rOo55qE5LuT5bqTXCIga2V5PVwiMlwiPlxyXG4gICAgICAgICAgICAgICAge3VzZXJTdGFyZWRSZXBvcy5sZW5ndGg+MFxyXG4gICAgICAgICAgICAgICAgP3VzZXJTdGFyZWRSZXBvcy5tYXAocmVwbyA9PiAoXHJcbiAgICAgICAgICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG99IGtleT17cmVwby5pZH0gLz5cclxuICAgICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgICAgICA6J+aaguaXoOWFs+azqOeahOS7k+W6kydcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLnVzZXItaW5mbyB7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IDIwMHB4O1xyXG4gICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNDBweDtcclxuICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcclxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmxvZ2luIHtcclxuICAgICAgICAgICAgICBmb250LXdlaWdodDogODAwO1xyXG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5uYW1lIHtcclxuICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgICAgICAgY29sb3I6ICM3Nzc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmJpbyB7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICAgICAgICBjb2xvcjogIzMzMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuYXZhdGFyIHtcclxuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLnVzZXItcmVwb3N7XHJcbiAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgfVxyXG59XHJcblxyXG5JbmRleC5nZXRJbml0aWFsUHJvcHM9YXN5bmMgKHtjdHgscmVkdXhTdG9yZSxyZXF9KT0+e1xyXG4gIGNvbnN0IHVzZXIgPXJlZHV4U3RvcmUuZ2V0U3RhdGUoKS51c2VyXHJcbiAgbGV0IHVzZXJSZXBvcz1bXSx1c2VyU3RhcmVkUmVwb3M9W10sdXNlclJlcG9zUmVzcD17fSx1c2VyU3RhcnJlZFJlcG9zUmVzcD17fVxyXG4gIGlmKCF1c2VyfHwhdXNlci5pZCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc0xvZ2luOmZhbHNlLFxyXG4gICAgICB1c2VyUmVwb3MsXHJcbiAgICAgIHVzZXJTdGFyZWRSZXBvcyxcclxuICAgIH1cclxuICB9ZWxzZXtcclxuICAgIGlmKCFpc1NlcnZlcil7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJykpXHJcbiAgICAgIGlmKGNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJykmJmNhY2hlLmdldCgndXNlclJlcG9zJykpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpc0xvZ2luOnRydWUsXHJcbiAgICAgICAgICB1c2VyUmVwb3M6Y2FjaGVVc2VyUmVwb3MsXHJcbiAgICAgICAgICB1c2VyU3RhcmVkUmVwb3M6Y2FjaGVVc2VyU3RhcmVkUmVwb3NcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/miYvliqjnvJPlrZhcclxuICAgICAgLy8gaWYoY2FjaGVVc2VyU3RhcmVkUmVwb3MmJmNhY2hlVXNlclJlcG9zKXtcclxuICAgICAgLy8gICByZXR1cm4ge1xyXG4gICAgICAvLyAgICAgaXNMb2dpbjp0cnVlLFxyXG4gICAgICAvLyAgICAgdXNlclJlcG9zOmNhY2hlVXNlclJlcG9zLFxyXG4gICAgICAvLyAgICAgdXNlclN0YXJlZFJlcG9zOmNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICB1c2VyUmVwb3NSZXNwPWF3YWl0IGFwaS5yZXF1ZXN0KHt1cmw6Jy91c2VyL3JlcG9zJ30sY3R4LnJlcSxjdHgucmVzKVxyXG4gICAgICB1c2VyU3RhcnJlZFJlcG9zUmVzcD0gYXdhaXQgYXBpLnJlcXVlc3Qoe3VybDonL3VzZXIvc3RhcnJlZCd9LGN0eC5yZXEsY3R4LnJlcylcclxuICAgICAgaWYoaXNTZXJ2ZXIpe1xyXG4gICAgICAgIHVzZXJSZXBvcz11c2VyUmVwb3NSZXNwLmRhdGF8fFtdXHJcbiAgICAgICAgdXNlclN0YXJlZFJlcG9zPXVzZXJTdGFycmVkUmVwb3NSZXNwLmRhdGF8fFtdXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIGlmKHVzZXJSZXBvc1Jlc3AuZGF0YSYmdXNlclJlcG9zUmVzcC5kYXRhLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgdXNlclJlcG9zPXVzZXJSZXBvc1Jlc3AuZGF0YS5kYXRhfHxbXVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih1c2VyU3RhcmVkUmVwb3MuZGF0YSYmdXNlclN0YXJlZFJlcG9zLmRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICB1c2VyU3RhcmVkUmVwb3M9dXNlclN0YXJyZWRSZXBvc1Jlc3AuZGF0YS5kYXRhfHxbXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coJ3dpbmRvdyBlcnJvcicsZXJyb3IpXHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc0xvZ2luOnRydWUsXHJcbiAgICAgIHVzZXJSZXBvcyxcclxuICAgICAgdXNlclN0YXJlZFJlcG9zLFxyXG4gICAgfVxyXG4gIH1cclxuICAgIFxyXG59XHJcbmNvbnN0IG1hcFN0YXRlVG9wcm9wcz0oc3RhdGUpPT57XHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLnN0YXRlXHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoY29ubmVjdChtYXBTdGF0ZVRvcHJvcHMpKEluZGV4KSkgIl19 */\\n/*@ sourceURL=C:\\\\Users\\\\marimo\\\\Desktop\\\\next-github\\\\pages\\\\index.js */\"));\n  }\n}\n\nIndex.getInitialProps = async ({\n  ctx,\n  reduxStore,\n  req\n}) => {\n  const user = reduxStore.getState().user;\n  let userRepos = [],\n      userStaredRepos = [],\n      userReposResp = {},\n      userStarredReposResp = {};\n\n  if (!user || !user.id) {\n    return {\n      isLogin: false,\n      userRepos,\n      userStaredRepos\n    };\n  } else {\n    if (!isServer) {\n      console.log(cache.get('userStaredRepos'));\n\n      if (cache.get('userStaredRepos') && cache.get('userRepos')) {\n        return {\n          isLogin: true,\n          userRepos: cacheUserRepos,\n          userStaredRepos: cacheUserStaredRepos\n        };\n      } //手动缓存\n      // if(cacheUserStaredRepos&&cacheUserRepos){\n      //   return {\n      //     isLogin:true,\n      //     userRepos:cacheUserRepos,\n      //     userStaredRepos:cacheUserStaredRepos\n      //   }\n      // }\n\n    }\n\n    try {\n      userReposResp = await api.request({\n        url: '/user/repos'\n      }, ctx.req, ctx.res);\n      userStarredReposResp = await api.request({\n        url: '/user/starred'\n      }, ctx.req, ctx.res);\n\n      if (isServer) {\n        userRepos = userReposResp.data || [];\n        userStaredRepos = userStarredReposResp.data || [];\n      } else {\n        if (userReposResp.data && userReposResp.data.success) {\n          userRepos = userReposResp.data.data || [];\n        }\n\n        if (userStaredRepos.data && userStaredRepos.data.success) {\n          userStaredRepos = userStarredReposResp.data.data || [];\n        }\n      }\n    } catch (error) {\n      console.log('window error', error);\n    }\n\n    return {\n      isLogin: true,\n      userRepos,\n      userStaredRepos\n    };\n  }\n};\n\nconst mapStateToprops = state => {\n  return _objectSpread({}, state);\n};\n\nexport default withRouter(connect(mapStateToprops)(Index));","map":{"version":3,"sources":["C:\\Users\\marimo\\Desktop\\next-github\\pages\\index.js"],"names":["useEffect","connect","Router","withRouter","LRU","api","Repo","cache","maxAge","isServer","Index","userRepos","user","router","userStaredRepos","length","set","get","console","log","tabKey","query","key","handleTabChange","activeKey","push","id","asPath","avatar_url","login","name","bio","marginRight","email","map","repo","getInitialProps","ctx","reduxStore","req","getState","userReposResp","userStarredReposResp","isLogin","cacheUserRepos","cacheUserStaredRepos","request","url","res","data","success","error","mapStateToprops","state"],"mappings":"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","sourcesContent":["import {useEffect} from 'react'\r\nimport {Button,Icon,Tabs} from \"antd\"\r\nimport {connect} from 'react-redux'\r\nimport Router,{withRouter} from 'next/router'\r\nimport LRU from 'lru-cache'\r\nimport api from '../lib/api'\r\nimport Repo from '../components/Repo'\r\n\r\nconst cache=new LRU({\r\n  maxAge:1000*60*5 //有效期5分钟\r\n})\r\n\r\nconst isServer = typeof window === 'undefined'\r\n// let cacheUserRepos,cacheUserStaredRepos\r\nfunction Index({userRepos,user,router,userStaredRepos}){\r\n\r\n  // userRepos, userStaredRepos依赖的作用是,数据过期后,将重新请求的数据进行缓存\r\nuseEffect(()=>{\r\n  \r\n  if(!isServer){\r\n    if(userRepos.length>0){\r\n      cache.set('userRepos',userRepos)\r\n      cache.get('userRepos',userRepos)\r\n      console.log('y',cache.get('userRepos',userRepos))\r\n    }\r\n    if(userStaredRepos.length>0){\r\n      cache.set('userStaredRepos',userStaredRepos)\r\n    }\r\n    //手动缓存\r\n    // cacheUserRepos=userRepos\r\n    // cacheUserStaredRepos=userStaredRepos\r\n    // setTimeout(()=>{\r\n    //     cacheUserRepos=null\r\n    //     cacheUserStaredRepos=null\r\n    // },1000*60*5)\r\n\r\n  }\r\n},[userRepos,userStaredRepos])\r\n\r\n  const tabKey = router.query.key || '1'\r\n  const handleTabChange = activeKey => {\r\n    Router.push(`/?key=${activeKey}`)\r\n  }\r\n    if(!user||!user.id){\r\n      return <div className='root'>\r\n        <p>亲，您还没有登录哦~</p>\r\n        <Button type='primary' href={`/prepare-auth?url=${router.asPath}`}>去登录</Button>\r\n        <style jsx>\r\n        {`\r\n        .root{\r\n          position:absolute;\r\n          top:50%;\r\n          left:50%;\r\n          transform:translate(-50%,-50%);\r\n          display:flex;\r\n          flex-direction: column;\r\n          justify-content: center;\r\n          align-items: center;\r\n        }\r\n        `}\r\n      </style>\r\n      </div>\r\n      \r\n      }else{\r\n        return <div className='root'>\r\n          <div className='user-info'>\r\n            <img src={user.avatar_url} alt=\"avatar_url\" className=\"avatar\" />\r\n            <span className=\"login\">{user.login}</span>\r\n            <span className=\"name\">{user.name}</span>\r\n            <span className=\"bio\">{user.bio}</span>\r\n            <p className=\"email\">\r\n              <Icon type=\"mail\" style={{ marginRight: 5 }} />\r\n              <a href={`mailto:${user.email}`}>\r\n                {user.email ? user.email : 'https://github.com/IFreeOvO'}\r\n              </a>\r\n            </p>\r\n          </div>\r\n          <div className=\"user-repos\">\r\n            <Tabs activeKey={tabKey} onChange={handleTabChange} animated={false}>\r\n              <Tabs.TabPane tab=\"你的仓库\" key=\"1\">\r\n                {userRepos.length>0\r\n                ?userRepos.map(repo => (\r\n                  <Repo repo={repo} key={repo.id} />\r\n                ))\r\n                :'暂时未查询到仓库'\r\n              }\r\n              </Tabs.TabPane>\r\n              <Tabs.TabPane tab=\"你关注的仓库\" key=\"2\">\r\n                {userStaredRepos.length>0\r\n                ?userStaredRepos.map(repo => (\r\n                  <Repo repo={repo} key={repo.id} />\r\n                ))\r\n                :'暂无关注的仓库'\r\n              }\r\n              </Tabs.TabPane>\r\n            </Tabs>\r\n          </div>\r\n          <style jsx>{`\r\n            .root {\r\n              display: flex;\r\n              padding: 20px 0;\r\n            }\r\n            .user-info {\r\n              width: 200px;\r\n              margin-right: 40px;\r\n              flex-shrink: 0;\r\n              display: flex;\r\n              flex-direction: column;\r\n            }\r\n            .login {\r\n              font-weight: 800;\r\n              font-size: 20px;\r\n              margin-top: 20px;\r\n            }\r\n            .name {\r\n              font-size: 16px;\r\n              color: #777;\r\n            }\r\n            .bio {\r\n              margin-top: 20px;\r\n              color: #333;\r\n            }\r\n            .avatar {\r\n              width: 100%;\r\n              border-radius: 5px;\r\n            }\r\n            .user-repos{\r\n              position:relative;\r\n            }\r\n          `}</style>\r\n        </div>\r\n      }\r\n}\r\n\r\nIndex.getInitialProps=async ({ctx,reduxStore,req})=>{\r\n  const user =reduxStore.getState().user\r\n  let userRepos=[],userStaredRepos=[],userReposResp={},userStarredReposResp={}\r\n  if(!user||!user.id){\r\n    return {\r\n      isLogin:false,\r\n      userRepos,\r\n      userStaredRepos,\r\n    }\r\n  }else{\r\n    if(!isServer){\r\n      console.log(cache.get('userStaredRepos'))\r\n      if(cache.get('userStaredRepos')&&cache.get('userRepos')){\r\n        return {\r\n          isLogin:true,\r\n          userRepos:cacheUserRepos,\r\n          userStaredRepos:cacheUserStaredRepos\r\n        }\r\n      }\r\n      //手动缓存\r\n      // if(cacheUserStaredRepos&&cacheUserRepos){\r\n      //   return {\r\n      //     isLogin:true,\r\n      //     userRepos:cacheUserRepos,\r\n      //     userStaredRepos:cacheUserStaredRepos\r\n      //   }\r\n      // }\r\n    }\r\n    try {\r\n      userReposResp=await api.request({url:'/user/repos'},ctx.req,ctx.res)\r\n      userStarredReposResp= await api.request({url:'/user/starred'},ctx.req,ctx.res)\r\n      if(isServer){\r\n        userRepos=userReposResp.data||[]\r\n        userStaredRepos=userStarredReposResp.data||[]\r\n      }else{\r\n        if(userReposResp.data&&userReposResp.data.success){\r\n          userRepos=userReposResp.data.data||[]\r\n        }\r\n        if(userStaredRepos.data&&userStaredRepos.data.success){\r\n          userStaredRepos=userStarredReposResp.data.data||[]\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log('window error',error)\r\n    }\r\n    return {\r\n      isLogin:true,\r\n      userRepos,\r\n      userStaredRepos,\r\n    }\r\n  }\r\n    \r\n}\r\nconst mapStateToprops=(state)=>{\r\n  return {\r\n    ...state\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToprops)(Index)) "]},"metadata":{},"sourceType":"module"}