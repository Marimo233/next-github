{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _Tabs from \"antd/lib/tabs\";\nimport _Icon from \"antd/lib/icon\";\nimport _Button from \"antd/lib/button\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Router, { withRouter } from 'next/router';\nimport LRU from 'lru-cache';\nimport { cacheArray } from '../lib/repo-cache';\nimport api from '../lib/api';\nimport Repo from '../components/Repo';\nvar cache = new LRU({\n  maxAge: 1000 * 60 * 10 // 有效期十分钟\n\n});\nvar isServer = false; // let cacheUserRepos,cacheUserStaredRepos\n\nfunction Index(_ref) {\n  var userRepos = _ref.userRepos,\n      user = _ref.user,\n      router = _ref.router,\n      userStaredRepos = _ref.userStaredRepos;\n  // userRepos, userStaredRepos依赖的作用是,数据过期后,将重新请求的数据进行缓存\n  useEffect(function () {\n    if (!isServer) {\n      if (userRepos) {\n        cache.set('userRepos', userRepos);\n      }\n\n      if (userStaredRepos) {\n        cache.set('userStaredRepos', userStaredRepos);\n      } //手动缓存\n      // cacheUserRepos=userRepos\n      // cacheUserStaredRepos=userStaredRepos\n      // setTimeout(()=>{\n      //     cacheUserRepos=null\n      //     cacheUserStaredRepos=null\n      // },1000*60*5)\n\n    }\n  }, [userRepos, userStaredRepos]);\n  useEffect(function () {\n    if (!isServer) {\n      cacheArray(userRepos);\n      cacheArray(userStaredRepos);\n    }\n  }, [userRepos, userStaredRepos]);\n  var tabKey = router.query.key || '1';\n\n  var handleTabChange = function handleTabChange(activeKey) {\n    Router.push(\"/?key=\".concat(activeKey));\n  };\n\n  if (!user || !user.id) {\n    return __jsx(\"div\", {\n      className: \"jsx-550798303\" + \" \" + 'root'\n    }, __jsx(\"p\", {\n      className: \"jsx-550798303\"\n    }, \"\\u4EB2\\uFF0C\\u60A8\\u8FD8\\u6CA1\\u6709\\u767B\\u5F55\\u54E6~\"), __jsx(_Button, {\n      type: \"primary\",\n      href: \"/prepare-auth?url=\".concat(router.asPath)\n    }, \"\\u53BB\\u767B\\u5F55\"), __jsx(_JSXStyle, {\n      id: \"550798303\"\n    }, \".root.jsx-550798303{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFyaW1vXFxEZXNrdG9wXFxuZXh0LWdpdGh1YlxccGFnZXNcXGluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXFEUyxBQUc0QixrQkFDVixRQUNDLFNBQ3NCLHlHQUNsQiwwRUFDVSw4RUFDQyxtR0FDSiw2RkFDckIiLCJmaWxlIjoiQzpcXFVzZXJzXFxtYXJpbW9cXERlc2t0b3BcXG5leHQtZ2l0aHViXFxwYWdlc1xcaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZUVmZmVjdH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7QnV0dG9uLEljb24sVGFic30gZnJvbSBcImFudGRcIlxyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xyXG5pbXBvcnQgUm91dGVyLHt3aXRoUm91dGVyfSBmcm9tICduZXh0L3JvdXRlcidcclxuaW1wb3J0IExSVSBmcm9tICdscnUtY2FjaGUnXHJcblxyXG5pbXBvcnQge2NhY2hlQXJyYXl9IGZyb20gJy4uL2xpYi9yZXBvLWNhY2hlJ1xyXG5pbXBvcnQgYXBpIGZyb20gJy4uL2xpYi9hcGknXHJcbmltcG9ydCBSZXBvIGZyb20gJy4uL2NvbXBvbmVudHMvUmVwbydcclxuXHJcbmNvbnN0IGNhY2hlID0gbmV3IExSVSh7XHJcbiAgbWF4QWdlOiAxMDAwICogNjAgKiAxMCAvLyDmnInmlYjmnJ/ljYHliIbpkp9cclxufSlcclxuXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCdcclxuLy8gbGV0IGNhY2hlVXNlclJlcG9zLGNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbmZ1bmN0aW9uIEluZGV4KHt1c2VyUmVwb3MsdXNlcixyb3V0ZXIsdXNlclN0YXJlZFJlcG9zfSl7XHJcblxyXG4gIC8vIHVzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9z5L6d6LWW55qE5L2c55So5pivLOaVsOaNrui/h+acn+WQjizlsIbph43mlrDor7fmsYLnmoTmlbDmja7ov5vooYznvJPlrZhcclxudXNlRWZmZWN0KCgpPT57XHJcbiAgXHJcbiAgaWYoIWlzU2VydmVyKXtcclxuICAgIGlmKHVzZXJSZXBvcyl7XHJcbiAgICAgIGNhY2hlLnNldCgndXNlclJlcG9zJyx1c2VyUmVwb3MpXHJcbiAgICB9XHJcbiAgICBpZih1c2VyU3RhcmVkUmVwb3Mpe1xyXG4gICAgICBjYWNoZS5zZXQoJ3VzZXJTdGFyZWRSZXBvcycsdXNlclN0YXJlZFJlcG9zKVxyXG4gICAgfVxyXG4gICAgLy/miYvliqjnvJPlrZhcclxuICAgIC8vIGNhY2hlVXNlclJlcG9zPXVzZXJSZXBvc1xyXG4gICAgLy8gY2FjaGVVc2VyU3RhcmVkUmVwb3M9dXNlclN0YXJlZFJlcG9zXHJcbiAgICAvLyBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAvLyAgICAgY2FjaGVVc2VyUmVwb3M9bnVsbFxyXG4gICAgLy8gICAgIGNhY2hlVXNlclN0YXJlZFJlcG9zPW51bGxcclxuICAgIC8vIH0sMTAwMCo2MCo1KVxyXG5cclxuICB9XHJcbn0sW3VzZXJSZXBvcyx1c2VyU3RhcmVkUmVwb3NdKVxyXG51c2VFZmZlY3QoKCkgPT4ge1xyXG4gIGlmKCFpc1NlcnZlcil7XHJcbiAgICBjYWNoZUFycmF5KHVzZXJSZXBvcylcclxuICAgIGNhY2hlQXJyYXkodXNlclN0YXJlZFJlcG9zKVxyXG4gIH1cclxufSxbdXNlclJlcG9zLHVzZXJTdGFyZWRSZXBvc10pXHJcbiAgY29uc3QgdGFiS2V5ID0gcm91dGVyLnF1ZXJ5LmtleSB8fCAnMSdcclxuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBhY3RpdmVLZXkgPT4ge1xyXG4gICAgUm91dGVyLnB1c2goYC8/a2V5PSR7YWN0aXZlS2V5fWApXHJcbiAgfVxyXG4gICAgaWYoIXVzZXJ8fCF1c2VyLmlkKXtcclxuICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPSdyb290Jz5cclxuICAgICAgICA8cD7kurLvvIzmgqjov5jmsqHmnInnmbvlvZXlk6Z+PC9wPlxyXG4gICAgICAgIDxCdXR0b24gdHlwZT0ncHJpbWFyeScgaHJlZj17YC9wcmVwYXJlLWF1dGg/dXJsPSR7cm91dGVyLmFzUGF0aH1gfT7ljrvnmbvlvZU8L0J1dHRvbj5cclxuICAgICAgICA8c3R5bGUganN4PlxyXG4gICAgICAgIHtgXHJcbiAgICAgICAgLnJvb3R7XHJcbiAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAgIHRvcDo1MCU7XHJcbiAgICAgICAgICBsZWZ0OjUwJTtcclxuICAgICAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTtcclxuICAgICAgICAgIGRpc3BsYXk6ZmxleDtcclxuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGB9XHJcbiAgICAgIDwvc3R5bGU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICBcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPSdyb290Jz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd1c2VyLWluZm8nPlxyXG4gICAgICAgICAgICA8aW1nIHNyYz17dXNlci5hdmF0YXJfdXJsfSBhbHQ9XCJhdmF0YXJfdXJsXCIgY2xhc3NOYW1lPVwiYXZhdGFyXCIgLz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibG9naW5cIj57dXNlci5sb2dpbn08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWVcIj57dXNlci5uYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmlvXCI+e3VzZXIuYmlvfTwvc3Bhbj5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZW1haWxcIj5cclxuICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwibWFpbFwiIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiA1IH19IC8+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj17YG1haWx0bzoke3VzZXIuZW1haWx9YH0+XHJcbiAgICAgICAgICAgICAgICB7dXNlci5lbWFpbCA/IHVzZXIuZW1haWwgOiAnaHR0cHM6Ly9naXRodWIuY29tL0lGcmVlT3ZPJ31cclxuICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXJlcG9zXCI+XHJcbiAgICAgICAgICAgIDxUYWJzIGFjdGl2ZUtleT17dGFiS2V5fSBvbkNoYW5nZT17aGFuZGxlVGFiQ2hhbmdlfSBhbmltYXRlZD17ZmFsc2V9PlxyXG4gICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmUgdGFiPVwi5L2g55qE5LuT5bqTXCIga2V5PVwiMVwiPlxyXG4gICAgICAgICAgICAgICAge3VzZXJSZXBvcy5sZW5ndGg+MFxyXG4gICAgICAgICAgICAgICAgP3VzZXJSZXBvcy5tYXAocmVwbyA9PiAoXHJcbiAgICAgICAgICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG99IGtleT17cmVwby5pZH0gLz5cclxuICAgICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgICAgICA6J+aaguaXtuacquafpeivouWIsOS7k+W6kydcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDlhbPms6jnmoTku5PlupNcIiBrZXk9XCIyXCI+XHJcbiAgICAgICAgICAgICAgICB7dXNlclN0YXJlZFJlcG9zLmxlbmd0aD4wXHJcbiAgICAgICAgICAgICAgICA/dXNlclN0YXJlZFJlcG9zLm1hcChyZXBvID0+IChcclxuICAgICAgICAgICAgICAgICAgPFJlcG8gcmVwbz17cmVwb30ga2V5PXtyZXBvLmlkfSAvPlxyXG4gICAgICAgICAgICAgICAgKSlcclxuICAgICAgICAgICAgICAgIDon5pqC5peg5YWz5rOo55qE5LuT5bqTJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgIC5yb290IHtcclxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAudXNlci1pbmZvIHtcclxuICAgICAgICAgICAgICB3aWR0aDogMjAwcHg7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG4gICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xyXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAubG9naW4ge1xyXG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA4MDA7XHJcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xyXG4gICAgICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLm5hbWUge1xyXG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgICAgICAgICAgICBjb2xvcjogIzc3NztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuYmlvIHtcclxuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5hdmF0YXIge1xyXG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAudXNlci1yZXBvc3tcclxuICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICB9XHJcbn1cclxuXHJcbkluZGV4LmdldEluaXRpYWxQcm9wcz1hc3luYyAoe2N0eCxyZWR1eFN0b3JlLHJlcX0pPT57XHJcbiAgY29uc3QgdXNlciA9cmVkdXhTdG9yZS5nZXRTdGF0ZSgpLnVzZXJcclxuICBsZXQgdXNlclJlcG9zPVtdLHVzZXJTdGFyZWRSZXBvcz1bXSx1c2VyUmVwb3NSZXNwPXt9LHVzZXJTdGFycmVkUmVwb3NSZXNwPXt9XHJcbiAgaWYoIXVzZXJ8fCF1c2VyLmlkKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzTG9naW46ZmFsc2UsXHJcbiAgICAgIHVzZXJSZXBvcyxcclxuICAgICAgdXNlclN0YXJlZFJlcG9zLFxyXG4gICAgfVxyXG4gIH1lbHNle1xyXG4gICAgaWYoIWlzU2VydmVyKXtcclxuICAgICAgaWYoY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSYmY2FjaGUuZ2V0KCd1c2VyU3RhcmVkUmVwb3MnKSl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlzTG9naW46dHJ1ZSxcclxuICAgICAgICAgIHVzZXJSZXBvczpjYWNoZS5nZXQoJ3VzZXJSZXBvcycpLFxyXG4gICAgICAgICAgdXNlclN0YXJlZFJlcG9zOmNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/miYvliqjnvJPlrZhcclxuICAgICAgLy8gaWYoY2FjaGVVc2VyU3RhcmVkUmVwb3MmJmNhY2hlVXNlclJlcG9zKXtcclxuICAgICAgLy8gICByZXR1cm4ge1xyXG4gICAgICAvLyAgICAgaXNMb2dpbjp0cnVlLFxyXG4gICAgICAvLyAgICAgdXNlclJlcG9zOmNhY2hlVXNlclJlcG9zLFxyXG4gICAgICAvLyAgICAgdXNlclN0YXJlZFJlcG9zOmNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICB1c2VyUmVwb3NSZXNwPWF3YWl0IGFwaS5yZXF1ZXN0KHt1cmw6Jy91c2VyL3JlcG9zJ30sY3R4LnJlcSxjdHgucmVzKVxyXG4gICAgICB1c2VyU3RhcnJlZFJlcG9zUmVzcD0gYXdhaXQgYXBpLnJlcXVlc3Qoe3VybDonL3VzZXIvc3RhcnJlZCd9LGN0eC5yZXEsY3R4LnJlcylcclxuICAgICAgdXNlclJlcG9zPXVzZXJSZXBvc1Jlc3AuZGF0YXx8W11cclxuICAgICAgdXNlclN0YXJlZFJlcG9zPXVzZXJTdGFycmVkUmVwb3NSZXNwLmRhdGF8fFtdXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnd2luZG93IGVycm9yJyxlcnJvcilcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzTG9naW46dHJ1ZSxcclxuICAgICAgdXNlclJlcG9zLFxyXG4gICAgICB1c2VyU3RhcmVkUmVwb3MsXHJcbiAgICB9XHJcbiAgfVxyXG4gICAgXHJcbn1cclxuY29uc3QgbWFwU3RhdGVUb3Byb3BzPShzdGF0ZSk9PntcclxuICByZXR1cm4ge1xyXG4gICAgLi4uc3RhdGVcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihjb25uZWN0KG1hcFN0YXRlVG9wcm9wcykoSW5kZXgpKSAiXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\marimo\\\\\\\\Desktop\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"));\n  } else {\n    return __jsx(\"div\", {\n      className: \"jsx-2976399386\" + \" \" + 'root'\n    }, __jsx(\"div\", {\n      className: \"jsx-2976399386\" + \" \" + 'user-info'\n    }, __jsx(\"img\", {\n      src: user.avatar_url,\n      alt: \"avatar_url\",\n      className: \"jsx-2976399386\" + \" \" + \"avatar\"\n    }), __jsx(\"span\", {\n      className: \"jsx-2976399386\" + \" \" + \"login\"\n    }, user.login), __jsx(\"span\", {\n      className: \"jsx-2976399386\" + \" \" + \"name\"\n    }, user.name), __jsx(\"span\", {\n      className: \"jsx-2976399386\" + \" \" + \"bio\"\n    }, user.bio), __jsx(\"p\", {\n      className: \"jsx-2976399386\" + \" \" + \"email\"\n    }, __jsx(_Icon, {\n      type: \"mail\",\n      style: {\n        marginRight: 5\n      }\n    }), __jsx(\"a\", {\n      href: \"mailto:\".concat(user.email),\n      className: \"jsx-2976399386\"\n    }, user.email ? user.email : 'https://github.com/IFreeOvO'))), __jsx(\"div\", {\n      className: \"jsx-2976399386\" + \" \" + \"user-repos\"\n    }, __jsx(_Tabs, {\n      activeKey: tabKey,\n      onChange: handleTabChange,\n      animated: false\n    }, __jsx(_Tabs.TabPane, {\n      tab: \"\\u4F60\\u7684\\u4ED3\\u5E93\",\n      key: \"1\"\n    }, userRepos.length > 0 ? userRepos.map(function (repo) {\n      return __jsx(Repo, {\n        repo: repo,\n        key: repo.id\n      });\n    }) : '暂时未查询到仓库'), __jsx(_Tabs.TabPane, {\n      tab: \"\\u4F60\\u5173\\u6CE8\\u7684\\u4ED3\\u5E93\",\n      key: \"2\"\n    }, userStaredRepos.length > 0 ? userStaredRepos.map(function (repo) {\n      return __jsx(Repo, {\n        repo: repo,\n        key: repo.id\n      });\n    }) : '暂无关注的仓库'))), __jsx(_JSXStyle, {\n      id: \"2976399386\"\n    }, \".root.jsx-2976399386{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:20px 0;}.user-info.jsx-2976399386{width:200px;margin-right:40px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.login.jsx-2976399386{font-weight:800;font-size:20px;margin-top:20px;}.name.jsx-2976399386{font-size:16px;color:#777;}.bio.jsx-2976399386{margin-top:20px;color:#333;}.avatar.jsx-2976399386{width:100%;border-radius:5px;}.user-repos.jsx-2976399386{position:relative;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFyaW1vXFxEZXNrdG9wXFxuZXh0LWdpdGh1YlxccGFnZXNcXGluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXNHc0IsQUFHNEIsQUFJRCxBQU9JLEFBS0QsQUFJQyxBQUlMLEFBSU0sV0FIQyxDQXBCQSxHQVlQLENBTEksQUFTSixFQVFiLFFBWEEsQ0FJQSxFQUlBLENBcEJnQixDQU9FLGdCQUNsQiwyQkFiaUIsWUFNRixHQUxmLHVFQU13Qiw4RUFDeEIiLCJmaWxlIjoiQzpcXFVzZXJzXFxtYXJpbW9cXERlc2t0b3BcXG5leHQtZ2l0aHViXFxwYWdlc1xcaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZUVmZmVjdH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7QnV0dG9uLEljb24sVGFic30gZnJvbSBcImFudGRcIlxyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xyXG5pbXBvcnQgUm91dGVyLHt3aXRoUm91dGVyfSBmcm9tICduZXh0L3JvdXRlcidcclxuaW1wb3J0IExSVSBmcm9tICdscnUtY2FjaGUnXHJcblxyXG5pbXBvcnQge2NhY2hlQXJyYXl9IGZyb20gJy4uL2xpYi9yZXBvLWNhY2hlJ1xyXG5pbXBvcnQgYXBpIGZyb20gJy4uL2xpYi9hcGknXHJcbmltcG9ydCBSZXBvIGZyb20gJy4uL2NvbXBvbmVudHMvUmVwbydcclxuXHJcbmNvbnN0IGNhY2hlID0gbmV3IExSVSh7XHJcbiAgbWF4QWdlOiAxMDAwICogNjAgKiAxMCAvLyDmnInmlYjmnJ/ljYHliIbpkp9cclxufSlcclxuXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCdcclxuLy8gbGV0IGNhY2hlVXNlclJlcG9zLGNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbmZ1bmN0aW9uIEluZGV4KHt1c2VyUmVwb3MsdXNlcixyb3V0ZXIsdXNlclN0YXJlZFJlcG9zfSl7XHJcblxyXG4gIC8vIHVzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9z5L6d6LWW55qE5L2c55So5pivLOaVsOaNrui/h+acn+WQjizlsIbph43mlrDor7fmsYLnmoTmlbDmja7ov5vooYznvJPlrZhcclxudXNlRWZmZWN0KCgpPT57XHJcbiAgXHJcbiAgaWYoIWlzU2VydmVyKXtcclxuICAgIGlmKHVzZXJSZXBvcyl7XHJcbiAgICAgIGNhY2hlLnNldCgndXNlclJlcG9zJyx1c2VyUmVwb3MpXHJcbiAgICB9XHJcbiAgICBpZih1c2VyU3RhcmVkUmVwb3Mpe1xyXG4gICAgICBjYWNoZS5zZXQoJ3VzZXJTdGFyZWRSZXBvcycsdXNlclN0YXJlZFJlcG9zKVxyXG4gICAgfVxyXG4gICAgLy/miYvliqjnvJPlrZhcclxuICAgIC8vIGNhY2hlVXNlclJlcG9zPXVzZXJSZXBvc1xyXG4gICAgLy8gY2FjaGVVc2VyU3RhcmVkUmVwb3M9dXNlclN0YXJlZFJlcG9zXHJcbiAgICAvLyBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAvLyAgICAgY2FjaGVVc2VyUmVwb3M9bnVsbFxyXG4gICAgLy8gICAgIGNhY2hlVXNlclN0YXJlZFJlcG9zPW51bGxcclxuICAgIC8vIH0sMTAwMCo2MCo1KVxyXG5cclxuICB9XHJcbn0sW3VzZXJSZXBvcyx1c2VyU3RhcmVkUmVwb3NdKVxyXG51c2VFZmZlY3QoKCkgPT4ge1xyXG4gIGlmKCFpc1NlcnZlcil7XHJcbiAgICBjYWNoZUFycmF5KHVzZXJSZXBvcylcclxuICAgIGNhY2hlQXJyYXkodXNlclN0YXJlZFJlcG9zKVxyXG4gIH1cclxufSxbdXNlclJlcG9zLHVzZXJTdGFyZWRSZXBvc10pXHJcbiAgY29uc3QgdGFiS2V5ID0gcm91dGVyLnF1ZXJ5LmtleSB8fCAnMSdcclxuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBhY3RpdmVLZXkgPT4ge1xyXG4gICAgUm91dGVyLnB1c2goYC8/a2V5PSR7YWN0aXZlS2V5fWApXHJcbiAgfVxyXG4gICAgaWYoIXVzZXJ8fCF1c2VyLmlkKXtcclxuICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPSdyb290Jz5cclxuICAgICAgICA8cD7kurLvvIzmgqjov5jmsqHmnInnmbvlvZXlk6Z+PC9wPlxyXG4gICAgICAgIDxCdXR0b24gdHlwZT0ncHJpbWFyeScgaHJlZj17YC9wcmVwYXJlLWF1dGg/dXJsPSR7cm91dGVyLmFzUGF0aH1gfT7ljrvnmbvlvZU8L0J1dHRvbj5cclxuICAgICAgICA8c3R5bGUganN4PlxyXG4gICAgICAgIHtgXHJcbiAgICAgICAgLnJvb3R7XHJcbiAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAgIHRvcDo1MCU7XHJcbiAgICAgICAgICBsZWZ0OjUwJTtcclxuICAgICAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTtcclxuICAgICAgICAgIGRpc3BsYXk6ZmxleDtcclxuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGB9XHJcbiAgICAgIDwvc3R5bGU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICBcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPSdyb290Jz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd1c2VyLWluZm8nPlxyXG4gICAgICAgICAgICA8aW1nIHNyYz17dXNlci5hdmF0YXJfdXJsfSBhbHQ9XCJhdmF0YXJfdXJsXCIgY2xhc3NOYW1lPVwiYXZhdGFyXCIgLz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibG9naW5cIj57dXNlci5sb2dpbn08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWVcIj57dXNlci5uYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmlvXCI+e3VzZXIuYmlvfTwvc3Bhbj5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZW1haWxcIj5cclxuICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwibWFpbFwiIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiA1IH19IC8+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj17YG1haWx0bzoke3VzZXIuZW1haWx9YH0+XHJcbiAgICAgICAgICAgICAgICB7dXNlci5lbWFpbCA/IHVzZXIuZW1haWwgOiAnaHR0cHM6Ly9naXRodWIuY29tL0lGcmVlT3ZPJ31cclxuICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXJlcG9zXCI+XHJcbiAgICAgICAgICAgIDxUYWJzIGFjdGl2ZUtleT17dGFiS2V5fSBvbkNoYW5nZT17aGFuZGxlVGFiQ2hhbmdlfSBhbmltYXRlZD17ZmFsc2V9PlxyXG4gICAgICAgICAgICAgIDxUYWJzLlRhYlBhbmUgdGFiPVwi5L2g55qE5LuT5bqTXCIga2V5PVwiMVwiPlxyXG4gICAgICAgICAgICAgICAge3VzZXJSZXBvcy5sZW5ndGg+MFxyXG4gICAgICAgICAgICAgICAgP3VzZXJSZXBvcy5tYXAocmVwbyA9PiAoXHJcbiAgICAgICAgICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG99IGtleT17cmVwby5pZH0gLz5cclxuICAgICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgICAgICA6J+aaguaXtuacquafpeivouWIsOS7k+W6kydcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XHJcbiAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDlhbPms6jnmoTku5PlupNcIiBrZXk9XCIyXCI+XHJcbiAgICAgICAgICAgICAgICB7dXNlclN0YXJlZFJlcG9zLmxlbmd0aD4wXHJcbiAgICAgICAgICAgICAgICA/dXNlclN0YXJlZFJlcG9zLm1hcChyZXBvID0+IChcclxuICAgICAgICAgICAgICAgICAgPFJlcG8gcmVwbz17cmVwb30ga2V5PXtyZXBvLmlkfSAvPlxyXG4gICAgICAgICAgICAgICAgKSlcclxuICAgICAgICAgICAgICAgIDon5pqC5peg5YWz5rOo55qE5LuT5bqTJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgPC9UYWJzPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgIC5yb290IHtcclxuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAudXNlci1pbmZvIHtcclxuICAgICAgICAgICAgICB3aWR0aDogMjAwcHg7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG4gICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xyXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAubG9naW4ge1xyXG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA4MDA7XHJcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xyXG4gICAgICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLm5hbWUge1xyXG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgICAgICAgICAgICBjb2xvcjogIzc3NztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuYmlvIHtcclxuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5hdmF0YXIge1xyXG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAudXNlci1yZXBvc3tcclxuICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICB9XHJcbn1cclxuXHJcbkluZGV4LmdldEluaXRpYWxQcm9wcz1hc3luYyAoe2N0eCxyZWR1eFN0b3JlLHJlcX0pPT57XHJcbiAgY29uc3QgdXNlciA9cmVkdXhTdG9yZS5nZXRTdGF0ZSgpLnVzZXJcclxuICBsZXQgdXNlclJlcG9zPVtdLHVzZXJTdGFyZWRSZXBvcz1bXSx1c2VyUmVwb3NSZXNwPXt9LHVzZXJTdGFycmVkUmVwb3NSZXNwPXt9XHJcbiAgaWYoIXVzZXJ8fCF1c2VyLmlkKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzTG9naW46ZmFsc2UsXHJcbiAgICAgIHVzZXJSZXBvcyxcclxuICAgICAgdXNlclN0YXJlZFJlcG9zLFxyXG4gICAgfVxyXG4gIH1lbHNle1xyXG4gICAgaWYoIWlzU2VydmVyKXtcclxuICAgICAgaWYoY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSYmY2FjaGUuZ2V0KCd1c2VyU3RhcmVkUmVwb3MnKSl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlzTG9naW46dHJ1ZSxcclxuICAgICAgICAgIHVzZXJSZXBvczpjYWNoZS5nZXQoJ3VzZXJSZXBvcycpLFxyXG4gICAgICAgICAgdXNlclN0YXJlZFJlcG9zOmNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy/miYvliqjnvJPlrZhcclxuICAgICAgLy8gaWYoY2FjaGVVc2VyU3RhcmVkUmVwb3MmJmNhY2hlVXNlclJlcG9zKXtcclxuICAgICAgLy8gICByZXR1cm4ge1xyXG4gICAgICAvLyAgICAgaXNMb2dpbjp0cnVlLFxyXG4gICAgICAvLyAgICAgdXNlclJlcG9zOmNhY2hlVXNlclJlcG9zLFxyXG4gICAgICAvLyAgICAgdXNlclN0YXJlZFJlcG9zOmNhY2hlVXNlclN0YXJlZFJlcG9zXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICB1c2VyUmVwb3NSZXNwPWF3YWl0IGFwaS5yZXF1ZXN0KHt1cmw6Jy91c2VyL3JlcG9zJ30sY3R4LnJlcSxjdHgucmVzKVxyXG4gICAgICB1c2VyU3RhcnJlZFJlcG9zUmVzcD0gYXdhaXQgYXBpLnJlcXVlc3Qoe3VybDonL3VzZXIvc3RhcnJlZCd9LGN0eC5yZXEsY3R4LnJlcylcclxuICAgICAgdXNlclJlcG9zPXVzZXJSZXBvc1Jlc3AuZGF0YXx8W11cclxuICAgICAgdXNlclN0YXJlZFJlcG9zPXVzZXJTdGFycmVkUmVwb3NSZXNwLmRhdGF8fFtdXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnd2luZG93IGVycm9yJyxlcnJvcilcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzTG9naW46dHJ1ZSxcclxuICAgICAgdXNlclJlcG9zLFxyXG4gICAgICB1c2VyU3RhcmVkUmVwb3MsXHJcbiAgICB9XHJcbiAgfVxyXG4gICAgXHJcbn1cclxuY29uc3QgbWFwU3RhdGVUb3Byb3BzPShzdGF0ZSk9PntcclxuICByZXR1cm4ge1xyXG4gICAgLi4uc3RhdGVcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihjb25uZWN0KG1hcFN0YXRlVG9wcm9wcykoSW5kZXgpKSAiXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\marimo\\\\\\\\Desktop\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"));\n  }\n}\n\nIndex.getInitialProps = function _callee(_ref2) {\n  var ctx, reduxStore, req, user, userRepos, userStaredRepos, userReposResp, userStarredReposResp;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          ctx = _ref2.ctx, reduxStore = _ref2.reduxStore, req = _ref2.req;\n          user = reduxStore.getState().user;\n          userRepos = [], userStaredRepos = [], userReposResp = {}, userStarredReposResp = {};\n\n          if (!(!user || !user.id)) {\n            _context.next = 7;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            isLogin: false,\n            userRepos: userRepos,\n            userStaredRepos: userStaredRepos\n          });\n\n        case 7:\n          if (isServer) {\n            _context.next = 10;\n            break;\n          }\n\n          if (!(cache.get('userRepos') && cache.get('userStaredRepos'))) {\n            _context.next = 10;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            isLogin: true,\n            userRepos: cache.get('userRepos'),\n            userStaredRepos: cache.get('userStaredRepos')\n          });\n\n        case 10:\n          _context.prev = 10;\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/repos'\n          }, ctx.req, ctx.res));\n\n        case 13:\n          userReposResp = _context.sent;\n          _context.next = 16;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/starred'\n          }, ctx.req, ctx.res));\n\n        case 16:\n          userStarredReposResp = _context.sent;\n          userRepos = userReposResp.data || [];\n          userStaredRepos = userStarredReposResp.data || [];\n          _context.next = 24;\n          break;\n\n        case 21:\n          _context.prev = 21;\n          _context.t0 = _context[\"catch\"](10);\n          console.log('window error', _context.t0);\n\n        case 24:\n          return _context.abrupt(\"return\", {\n            isLogin: true,\n            userRepos: userRepos,\n            userStaredRepos: userStaredRepos\n          });\n\n        case 25:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[10, 21]], Promise);\n};\n\nvar mapStateToprops = function mapStateToprops(state) {\n  return _objectSpread({}, state);\n};\n\nexport default withRouter(connect(mapStateToprops)(Index));","map":{"version":3,"sources":["C:/Users/marimo/Desktop/next-github/pages/index.js"],"names":["useEffect","connect","Router","withRouter","LRU","cacheArray","api","Repo","cache","maxAge","isServer","Index","userRepos","user","router","userStaredRepos","set","tabKey","query","key","handleTabChange","activeKey","push","id","asPath","avatar_url","login","name","bio","marginRight","email","length","map","repo","getInitialProps","ctx","reduxStore","req","getState","userReposResp","userStarredReposResp","isLogin","get","request","url","res","data","console","log","mapStateToprops","state"],"mappings":"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","sourcesContent":["import {useEffect} from 'react'\r\nimport {Button,Icon,Tabs} from \"antd\"\r\nimport {connect} from 'react-redux'\r\nimport Router,{withRouter} from 'next/router'\r\nimport LRU from 'lru-cache'\r\n\r\nimport {cacheArray} from '../lib/repo-cache'\r\nimport api from '../lib/api'\r\nimport Repo from '../components/Repo'\r\n\r\nconst cache = new LRU({\r\n  maxAge: 1000 * 60 * 10 // 有效期十分钟\r\n})\r\n\r\nconst isServer = typeof window === 'undefined'\r\n// let cacheUserRepos,cacheUserStaredRepos\r\nfunction Index({userRepos,user,router,userStaredRepos}){\r\n\r\n  // userRepos, userStaredRepos依赖的作用是,数据过期后,将重新请求的数据进行缓存\r\nuseEffect(()=>{\r\n  \r\n  if(!isServer){\r\n    if(userRepos){\r\n      cache.set('userRepos',userRepos)\r\n    }\r\n    if(userStaredRepos){\r\n      cache.set('userStaredRepos',userStaredRepos)\r\n    }\r\n    //手动缓存\r\n    // cacheUserRepos=userRepos\r\n    // cacheUserStaredRepos=userStaredRepos\r\n    // setTimeout(()=>{\r\n    //     cacheUserRepos=null\r\n    //     cacheUserStaredRepos=null\r\n    // },1000*60*5)\r\n\r\n  }\r\n},[userRepos,userStaredRepos])\r\nuseEffect(() => {\r\n  if(!isServer){\r\n    cacheArray(userRepos)\r\n    cacheArray(userStaredRepos)\r\n  }\r\n},[userRepos,userStaredRepos])\r\n  const tabKey = router.query.key || '1'\r\n  const handleTabChange = activeKey => {\r\n    Router.push(`/?key=${activeKey}`)\r\n  }\r\n    if(!user||!user.id){\r\n      return <div className='root'>\r\n        <p>亲，您还没有登录哦~</p>\r\n        <Button type='primary' href={`/prepare-auth?url=${router.asPath}`}>去登录</Button>\r\n        <style jsx>\r\n        {`\r\n        .root{\r\n          position:absolute;\r\n          top:50%;\r\n          left:50%;\r\n          transform:translate(-50%,-50%);\r\n          display:flex;\r\n          flex-direction: column;\r\n          justify-content: center;\r\n          align-items: center;\r\n        }\r\n        `}\r\n      </style>\r\n      </div>\r\n      \r\n      }else{\r\n        return <div className='root'>\r\n          <div className='user-info'>\r\n            <img src={user.avatar_url} alt=\"avatar_url\" className=\"avatar\" />\r\n            <span className=\"login\">{user.login}</span>\r\n            <span className=\"name\">{user.name}</span>\r\n            <span className=\"bio\">{user.bio}</span>\r\n            <p className=\"email\">\r\n              <Icon type=\"mail\" style={{ marginRight: 5 }} />\r\n              <a href={`mailto:${user.email}`}>\r\n                {user.email ? user.email : 'https://github.com/IFreeOvO'}\r\n              </a>\r\n            </p>\r\n          </div>\r\n          <div className=\"user-repos\">\r\n            <Tabs activeKey={tabKey} onChange={handleTabChange} animated={false}>\r\n              <Tabs.TabPane tab=\"你的仓库\" key=\"1\">\r\n                {userRepos.length>0\r\n                ?userRepos.map(repo => (\r\n                  <Repo repo={repo} key={repo.id} />\r\n                ))\r\n                :'暂时未查询到仓库'\r\n              }\r\n              </Tabs.TabPane>\r\n              <Tabs.TabPane tab=\"你关注的仓库\" key=\"2\">\r\n                {userStaredRepos.length>0\r\n                ?userStaredRepos.map(repo => (\r\n                  <Repo repo={repo} key={repo.id} />\r\n                ))\r\n                :'暂无关注的仓库'\r\n              }\r\n              </Tabs.TabPane>\r\n            </Tabs>\r\n          </div>\r\n          <style jsx>{`\r\n            .root {\r\n              display: flex;\r\n              padding: 20px 0;\r\n            }\r\n            .user-info {\r\n              width: 200px;\r\n              margin-right: 40px;\r\n              flex-shrink: 0;\r\n              display: flex;\r\n              flex-direction: column;\r\n            }\r\n            .login {\r\n              font-weight: 800;\r\n              font-size: 20px;\r\n              margin-top: 20px;\r\n            }\r\n            .name {\r\n              font-size: 16px;\r\n              color: #777;\r\n            }\r\n            .bio {\r\n              margin-top: 20px;\r\n              color: #333;\r\n            }\r\n            .avatar {\r\n              width: 100%;\r\n              border-radius: 5px;\r\n            }\r\n            .user-repos{\r\n              position:relative;\r\n            }\r\n          `}</style>\r\n        </div>\r\n      }\r\n}\r\n\r\nIndex.getInitialProps=async ({ctx,reduxStore,req})=>{\r\n  const user =reduxStore.getState().user\r\n  let userRepos=[],userStaredRepos=[],userReposResp={},userStarredReposResp={}\r\n  if(!user||!user.id){\r\n    return {\r\n      isLogin:false,\r\n      userRepos,\r\n      userStaredRepos,\r\n    }\r\n  }else{\r\n    if(!isServer){\r\n      if(cache.get('userRepos')&&cache.get('userStaredRepos')){\r\n        return {\r\n          isLogin:true,\r\n          userRepos:cache.get('userRepos'),\r\n          userStaredRepos:cache.get('userStaredRepos')\r\n        }\r\n      }\r\n      //手动缓存\r\n      // if(cacheUserStaredRepos&&cacheUserRepos){\r\n      //   return {\r\n      //     isLogin:true,\r\n      //     userRepos:cacheUserRepos,\r\n      //     userStaredRepos:cacheUserStaredRepos\r\n      //   }\r\n      // }\r\n    }\r\n    try {\r\n      userReposResp=await api.request({url:'/user/repos'},ctx.req,ctx.res)\r\n      userStarredReposResp= await api.request({url:'/user/starred'},ctx.req,ctx.res)\r\n      userRepos=userReposResp.data||[]\r\n      userStaredRepos=userStarredReposResp.data||[]\r\n    } catch (error) {\r\n      console.log('window error',error)\r\n    }\r\n    return {\r\n      isLogin:true,\r\n      userRepos,\r\n      userStaredRepos,\r\n    }\r\n  }\r\n    \r\n}\r\nconst mapStateToprops=(state)=>{\r\n  return {\r\n    ...state\r\n  }\r\n}\r\nexport default withRouter(connect(mapStateToprops)(Index)) "]},"metadata":{},"sourceType":"module"}