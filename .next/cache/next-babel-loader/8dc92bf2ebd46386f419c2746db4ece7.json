{"ast":null,"code":"const axios = require('axios');\n\nconst isServer = true;\nconst github_base_url = 'https://api.github.com';\n\nasync function request({\n  method = 'GET',\n  url,\n  data\n}, req, res) {\n  if (!url) {\n    throw Error('url must be provied');\n  }\n\n  if (isServer) {\n    console.log('in');\n    const githubAuth = req.session && req.session.githubAuth || {};\n    const token = githubAuth && githubAuth.access_token;\n    let headers = {};\n\n    if (token) {\n      headers['Authorization'] = `${githubAuth.token_type} ${token}`;\n    }\n\n    return axios({\n      method,\n      url: `${github_base_url}${url}`,\n      headers,\n      data\n    });\n  } else {\n    return axios({\n      method,\n      url: `/github${url}`,\n      data\n    });\n  }\n}\n\nmodule.exports = {\n  request\n};","map":{"version":3,"sources":["C:/Users/marimo/Desktop/next-github/lib/api.js"],"names":["axios","require","isServer","github_base_url","request","method","url","data","req","res","Error","console","log","githubAuth","session","token","access_token","headers","token_type","module","exports"],"mappings":"AAAA,MAAMA,KAAK,GAACC,OAAO,CAAC,OAAD,CAAnB;;AAEA,MAAMC,QAAQ,OAAd;AACA,MAAMC,eAAe,GAAC,wBAAtB;;AAEA,eAAeC,OAAf,CAAuB;AAACC,EAAAA,MAAM,GAAC,KAAR;AAAcC,EAAAA,GAAd;AAAkBC,EAAAA;AAAlB,CAAvB,EAA+CC,GAA/C,EAAmDC,GAAnD,EAAuD;AACrD,MAAG,CAACH,GAAJ,EAAQ;AACN,UAAMI,KAAK,CAAC,qBAAD,CAAX;AACD;;AACD,MAAGR,QAAH,EAAY;AACVS,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,UAAMC,UAAU,GAACL,GAAG,CAACM,OAAJ,IAAaN,GAAG,CAACM,OAAJ,CAAYD,UAAzB,IAAqC,EAAtD;AACA,UAAME,KAAK,GAAGF,UAAU,IAAEA,UAAU,CAACG,YAArC;AACA,QAAIC,OAAO,GAAC,EAAZ;;AACA,QAAGF,KAAH,EAAS;AACPE,MAAAA,OAAO,CAAC,eAAD,CAAP,GAA0B,GAAEJ,UAAU,CAACK,UAAW,IAAGH,KAAM,EAA3D;AACD;;AACD,WAAOf,KAAK,CAAC;AACXK,MAAAA,MADW;AAEXC,MAAAA,GAAG,EAAE,GAAEH,eAAgB,GAAEG,GAAI,EAFlB;AAGXW,MAAAA,OAHW;AAIXV,MAAAA;AAJW,KAAD,CAAZ;AAOD,GAfD,MAeK;AACH,WAAOP,KAAK,CAAC;AACXK,MAAAA,MADW;AAEXC,MAAAA,GAAG,EAAE,UAASA,GAAI,EAFP;AAGXC,MAAAA;AAHW,KAAD,CAAZ;AAKD;AACF;;AAEDY,MAAM,CAACC,OAAP,GAAe;AACbhB,EAAAA;AADa,CAAf","sourcesContent":["const axios=require('axios')\r\n\r\nconst isServer =typeof window==='undefined'\r\nconst github_base_url='https://api.github.com'\r\n\r\nasync function request({method='GET',url,data},req,res){\r\n  if(!url){\r\n    throw Error('url must be provied')\r\n  }\r\n  if(isServer){\r\n    console.log('in')\r\n    const githubAuth=req.session&&req.session.githubAuth||{}\r\n    const token = githubAuth&&githubAuth.access_token\r\n    let headers={}\r\n    if(token){\r\n      headers['Authorization']=`${githubAuth.token_type} ${token}`\r\n    }\r\n    return axios({\r\n      method,\r\n      url:`${github_base_url}${url}`,\r\n      headers,\r\n      data\r\n    })\r\n  \r\n  }else{\r\n    return axios({\r\n      method,\r\n      url:`/github${url}`,\r\n      data\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports={\r\n  request\r\n}"]},"metadata":{},"sourceType":"script"}